{
    "componentChunkName": "component---src-templates-lesson-template-js",
    "path": "/mongodb",
    "result": {"data":{"markdownRemark":{"html":"<p><a href=\"https://www.jetbrains.com/lp/devecosystem-2020/databases/\">MongoDB</a> is one of the most popular databases in the world today. Over the past decade it has established itself as a reliable custodian of database workloads both small and large. I think it's a fairly uncontroversial thing to say it is one of the most popular NoSQL database in the world, if not the most popular one.</p>\n<p>If you look through MongoDB's history, you will find some rough patches. There was the one time it ended up dropping a lot of data and a lot of people wrote it off after that. You may come across stories or upset people if you Google MongoDB. That was a long time ago and they've had a very solid record since then so I wouldn't worry too much about it.</p>\n<h2 id=\"lets-get-mongodb-going\" style=\"position:relative;\"><a href=\"#lets-get-mongodb-going\" aria-label=\"lets get mongodb going permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let's get MongoDB going</h2>\n<p>Let's dive into it. If you're running Docker like me, run the following commands</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run --name test-mongo -dit -p <span class=\"token number\">27017</span>:27017 --rm mongo:4.4.1\n\n<span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> -it test-mongo mongo</code></pre></div>\n<p>This will run a new MongoDB container at version 4.4.1 and call it <code class=\"language-text\">test-mongo</code> so we can reference it by name. We then on the second command run the command <code class=\"language-text\">mongo</code> inside of that <code class=\"language-text\">test-mongo</code> container so we can do things inside of the container. The <code class=\"language-text\">mongo</code> container (which is the official container put together by MongoDB Inc themselves) runs MongoDB automatically so we don't need to do anything. We just need to connect inside the container and run our commands from within the container. At this point you should be dropped into an interactive MongoDB shell. Let's get ourselves acquainted with MongoDB!</p>\n<h2 id=\"databases-and-collections\" style=\"position:relative;\"><a href=\"#databases-and-collections\" aria-label=\"databases and collections permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Databases and Collections</h2>\n<p>Like other databases, MongoDB has the concept of databases inside of it. A database is an overarching group of smaller collections of data. It's up to you how you want to structure your databases and collections but in general you want to keep like-things together. If you have a collection of user information and user notifications, you might consider storing those in the same database but different collections. If you have a user information collection and a collection of items for sale in your store, you might consider storing those in separate databases. Or not! There isn't a hard-and-fast rule here. Organize it how you see fit. One small consideration (don't even have to follow this either) is that if you have one large collection that gets a lot of traffic and a small collection that gets little traffic, it can be logically easier to scale those two servers separately if you put them in separate database.</p>\n<p>Collections are groups of documents. A group of objects. Almost always you want each of these objects to represent one thing. If you have a <code class=\"language-text\">users</code> collection, one object should represent one user. I've seen people do things like have throw unlike things in a collection (like putting users and items-for-sale in one collection) and it does not turn out well. Use multiple collections.</p>\n<p>Collections also have some fun capabilities. You can do capped collections where you can say \"only have 100 items in this collection and toss out the oldest one when you get the 101st\". You can also add indexes but we'll get there.</p>\n<h2 id=\"lets-insert-some-documents\" style=\"position:relative;\"><a href=\"#lets-insert-some-documents\" aria-label=\"lets insert some documents permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let's insert some documents</h2>\n<p>Inside your MongoDB console run <code class=\"language-text\">show dbs</code>. This will allow you to see all the existing databases. In order to start using one, you do <code class=\"language-text\">use &lt;database name></code>. Let's make our own. Run <code class=\"language-text\">use adoption</code>. If you run <code class=\"language-text\">db</code> now it'll show you're using the <code class=\"language-text\">adoption</code> database.</p>\n<p>Let's make a collection called <code class=\"language-text\">pets</code>. Run <code class=\"language-text\">db.pets.insertOne({name: \"Luna\", type: \"dog\", breed: \"Havanese\", age: 8})</code>. Let's break this down.</p>\n<p>The <code class=\"language-text\">db</code> refers to the database you chose with <code class=\"language-text\">use adoption</code>. If you want to use a different database, you just <code class=\"language-text\">use</code> something else.</p>\n<p>The <code class=\"language-text\">pets</code> is the name of a collections that we're creating right now on the fly. If a collection doesn't exist, it's created instantly. If it does exist, it'll just insert into that collection. We could have called <code class=\"language-text\">pets</code> anything.</p>\n<p>The <code class=\"language-text\">insertOne</code> is a function that exists on collections. As the name implies it allows you to insert one document at a time. There are a lot of ways to insert documents. Just run <code class=\"language-text\">db.pets.help()</code> to see everything available to you. Since the query language is JavaScript, the <code class=\"language-text\">()</code> are just to invoke the function.</p>\n<p>The <code class=\"language-text\">{name: \"Luna\", type: \"dog\", breed: \"Havanese\", age: 8}</code> is the actual object being inserted into the collection. Here we're just using strings and numbers, but you can see all the available types <a href=\"https://docs.mongodb.com/manual/reference/bson-types/\">here</a>.</p>\n<p>Good so far? Great! Try running <code class=\"language-text\">db.pets.count()</code>. You'll see it returns <code class=\"language-text\">1</code> because we have one pet in our pets collection. Try running <code class=\"language-text\">db.pets.findOne()</code> and you'll see it'll give us Luna back. We'll get more into querying in a second.</p>\n<p>Let's insert a lot of documents. Like, 10,000. Since we're querying with JavaScript, we can write some Array fanciness to generate an array of random objects. Copy and paste this into the MongoDB console.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\">db<span class=\"token punctuation\">.</span>pets<span class=\"token punctuation\">.</span><span class=\"token function\">insertMany</span><span class=\"token punctuation\">(</span>\n  Array<span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">length</span><span class=\"token operator\">:</span> <span class=\"token number\">10000</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">_<span class=\"token punctuation\">,</span> index</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">name</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"Luna\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Fido\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Fluffy\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Carina\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Spot\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Beethoven\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Baxter\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Dug\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Zero\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Santa's Little Helper\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Snoopy\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>index <span class=\"token operator\">%</span> <span class=\"token number\">9</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">type</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"dog\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"cat\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"bird\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"reptile\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>index <span class=\"token operator\">%</span> <span class=\"token number\">4</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">age</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span>index <span class=\"token operator\">%</span> <span class=\"token number\">18</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">breed</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n      <span class=\"token string\">\"Havanese\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Bichon Frise\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Beagle\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Cockatoo\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"African Gray\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Tabby\"</span><span class=\"token punctuation\">,</span>\n      <span class=\"token string\">\"Iguana\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>index <span class=\"token operator\">%</span> <span class=\"token number\">7</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">index</span><span class=\"token operator\">:</span> index<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Basically this makes 10000 pet objects in an array. Because we used modulo, everyone will get the same objects every time. Now run you're <code class=\"language-text\">db.pets.count()</code> and see what you get. You should get back that you have 10,000 items in your database. Great! Let's start querying it.</p>","frontmatter":{"path":"/mongodb","title":"MongoDB","order":"2B","section":"NoSQL","description":"MongoDB is a document-based NoSQL database that allows developers to write unstructured data to be queried later. Brian goes into what this means for a developer and when you might want to use it"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"order":"2F","path":"/aggregation","title":"Aggregation"}}},{"node":{"frontmatter":{"order":"4D","path":"/complex-neo4j-queries","title":"Complex Neo4j Queries"}}},{"node":{"frontmatter":{"order":"3D","path":"/complex-sql-queries","title":"Complex SQL Queries"}}},{"node":{"frontmatter":{"order":"4A","path":"/graph-databases","title":"Graph Databases"}}},{"node":{"frontmatter":{"order":"3H","path":"/hasura","title":"Hasura"}}},{"node":{"frontmatter":{"order":"6A","path":"/conclusion","title":"Conclusion"}}},{"node":{"frontmatter":{"order":"2E","path":"/indexes-in-mongodb","title":"Indexes in MongoDB"}}},{"node":{"frontmatter":{"order":"1B","path":"/installation-notes","title":"Installation Notes"}}},{"node":{"frontmatter":{"order":"3A","path":"/intro-to-sql-databases","title":"Intro to SQL Database"}}},{"node":{"frontmatter":{"order":"1A","path":"/intro","title":"Introduction"}}},{"node":{"frontmatter":{"order":"3E","path":"/json-in-postgresql","title":"JSON in PostgreSQL"}}},{"node":{"frontmatter":{"order":"2H","path":"/mongodb-ops","title":"MongoDB Ops"}}},{"node":{"frontmatter":{"order":"5A","path":"/key-value-store","title":"Key-Value Store"}}},{"node":{"frontmatter":{"order":"2B","path":"/mongodb","title":"MongoDB"}}},{"node":{"frontmatter":{"order":"5E","path":"/more-redis-concepts","title":"More Redis Concepts"}}},{"node":{"frontmatter":{"order":"4C","path":"/neo4j-browser","title":"Neo4j Browser"}}},{"node":{"frontmatter":{"order":"4E","path":"/neo4j-indexes","title":"Indexes in Neo4j"}}},{"node":{"frontmatter":{"order":"4G","path":"/neo4j-ops","title":"Neo4j Ops"}}},{"node":{"frontmatter":{"order":"4B","path":"/neo4j","title":"Neo4j"}}},{"node":{"frontmatter":{"order":"4F","path":"/nodejs-app-with-neo4j","title":"Node.js App with Neo4j"}}},{"node":{"frontmatter":{"order":"3G","path":"/nodejs-app-with-postgresql","title":"Node.js App with PostgreSQL"}}},{"node":{"frontmatter":{"order":"5F","path":"/nodejs-app-with-redis","title":"Node.js App with Redis"}}},{"node":{"frontmatter":{"order":"2G","path":"/nodejs-app-with-mongodb","title":"Write a Node.js app with MongoDB"}}},{"node":{"frontmatter":{"order":"2A","path":"/nosql","title":"NoSQL"}}},{"node":{"frontmatter":{"order":"3F","path":"/postgresql-indexes","title":"Indexes in PostgreSQL"}}},{"node":{"frontmatter":{"order":"3I","path":"/postgresql-ops","title":"PostgreSQL Ops"}}},{"node":{"frontmatter":{"order":"3B","path":"/postgresql","title":"PostgreSQL"}}},{"node":{"frontmatter":{"order":"2C","path":"/querying-mongodb","title":"Querying MongoDB"}}},{"node":{"frontmatter":{"order":"3C","path":"/querying-postgresql","title":"Querying PostgreSQL"}}},{"node":{"frontmatter":{"order":"5C","path":"/redis-command-options","title":"Redis Command Options"}}},{"node":{"frontmatter":{"order":"5G","path":"/redis-ops","title":"Redis Ops"}}},{"node":{"frontmatter":{"order":"5D","path":"/redis-data-types","title":"Redis Data Types"}}},{"node":{"frontmatter":{"order":"5B","path":"/redis","title":"Redis"}}},{"node":{"frontmatter":{"order":"1C","path":"/terminology","title":"Terminology"}}},{"node":{"frontmatter":{"order":"2D","path":"/updating-mongodb","title":"Updating MongoDB"}}}]}},"pageContext":{}},
    "staticQueryHashes": ["2959687377"]}