{
    "componentChunkName": "component---src-templates-lesson-template-js",
    "path": "/postgresql",
    "result": {"data":{"markdownRemark":{"html":"<p>So we examined a bit of the general relational databases in the previous section, let's get into some interacting with some databases.</p>\n<h2 id=\"lets-get-postgresql-going\" style=\"position:relative;\"><a href=\"#lets-get-postgresql-going\" aria-label=\"lets get postgresql going permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Let's get PostgreSQL going</h2>\n<p>Let's start by getting a PostgreSQL container going. I'm going to use version 13.0 (the latest container available) and I'd recommend for this tutorial you do the same. While newer ones might be available, this is the one that will work with this tutorial.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run --name my-postgres -e <span class=\"token assign-left variable\">POSTGRES_PASSWORD</span><span class=\"token operator\">=</span>mysecretpassword -p <span class=\"token number\">5432</span>:5432 -d --rm postgres:13.0\n\n<span class=\"token function\">docker</span> <span class=\"token builtin class-name\">exec</span> -it -u postgres my-postgres psql</code></pre></div>\n<p>We have to give it a password or PostgreSQL won't start by default. Don't worry, this isn't how'd you start it in production.</p>\n<p>At this point you should</p>\n<h2 id=\"databases-and-tables\" style=\"position:relative;\"><a href=\"#databases-and-tables\" aria-label=\"databases and tables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Databases and Tables</h2>\n<p>PostgreSQL has the same concept of databases as MongoDB. This will be a group of tables that are related to similar problem-area. It'll be up to you how you choose to group these. Some apps are focused enough to all be in one database; others will need many databases. It's up to you and your data architect to figure out how to do that. In general, things that should be scaled separately (like maybe payment transactions and items in your store?)</p>\n<p>Tables are similar to collections. This will be a group of records. It's like one Excel spreadsheet. A record is like an object in MongoDB. It's one thing in a table. One record would be a user in the users database.</p>\n<p>Tables will have a defined schema. Like in Excel, one column will reprent one bit of information, so too will a field in a record represent one bit of information. As opposed to MongoDB, this schema has to be defined in advance and cannot be done on the fly. Altering a table's schema is a hefty operation and on big tables can literally takes hours or days to do. Forethought is a lot more important here.</p>\n<p>This is a simple intro to this. There's a lot more to this but we'll get into as we go through our defined example.</p>\n<h2 id=\"our-first-sql-queries\" style=\"position:relative;\"><a href=\"#our-first-sql-queries\" aria-label=\"our first sql queries permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Our first SQL queries</h2>\n<p>The first order of business it create a new database. And we're going to do that using SQL. All SQL is fairly similar but are not necessarily drop-in compatible with each other. So while this would be similar in getting started to MySQL, it wouldn't be identical.</p>\n<p>First thing you'll notice is I'll capitlize all the key words. This is to make reading the query easier, you can see what's a key word and what's not at a glance. And moreover it's just common to do so I stick with common best practices.</p>\n<p>By default you connect to database \"postgres\" which is just a default database name. Let's make our own called <code class=\"language-text\">message_board</code>.</p>\n<p>So go ahead and run your first query here to create a new database. <strong>Make sure you include the <code class=\"language-text\">;</code> at the end.</strong> While the semi-colon is optional in JS it is not in SQL! It thinks you're still going until you include that <code class=\"language-text\">;</code>.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">DATABASE</span> message_boards<span class=\"token punctuation\">;</span></code></pre></div>\n<p>You should see <code class=\"language-text\">CREATE DATABASE</code> underneath that as a confirmation that it went through. Great! Now we have a new database to switch to, so let's do that.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">\\c message_boards<span class=\"token punctuation\">;</span>\n<span class=\"token comment\">-- \\connect message_boards works too</span></code></pre></div>\n<p>This <code class=\"language-text\">\\</code> notation is how you give admin commands to PostgreSQL through its <code class=\"language-text\">psql</code> CLI which is what we're using right now. In this case we're saying connect to this new database. Let's try a few other commands real quick!</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token comment\">-- see all databases</span>\n\\l\n\n<span class=\"token comment\">-- see all tables in this database, probably won't see anything</span>\n\\d\n\n<span class=\"token comment\">-- see all available commands</span>\n\\?\n\n<span class=\"token comment\">-- see available queries</span>\n\\h\n\n<span class=\"token comment\">-- run a shell command</span>\n\\<span class=\"token operator\">!</span> ls <span class=\"token operator\">&amp;&amp;</span> echo <span class=\"token string\">\"hi from shell!\"</span></code></pre></div>\n<p>In case you didn't know, <code class=\"language-text\">--</code> is how you do comments in SQL.</p>\n<h2 id=\"first-table\" style=\"position:relative;\"><a href=\"#first-table\" aria-label=\"first table permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>First table</h2>\n<p>Okay, so now we have a database and we're connected to it, let's create our first table.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">CREATE</span> <span class=\"token keyword\">TABLE</span> users <span class=\"token punctuation\">(</span>\n  user_id <span class=\"token keyword\">INTEGER</span> <span class=\"token keyword\">PRIMARY</span> <span class=\"token keyword\">KEY</span> GENERATED ALWAYS <span class=\"token keyword\">AS</span> <span class=\"token keyword\">IDENTITY</span><span class=\"token punctuation\">,</span>\n  username <span class=\"token keyword\">VARCHAR</span> <span class=\"token punctuation\">(</span> <span class=\"token number\">25</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">UNIQUE</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n  email <span class=\"token keyword\">VARCHAR</span> <span class=\"token punctuation\">(</span> <span class=\"token number\">50</span> <span class=\"token punctuation\">)</span> <span class=\"token keyword\">UNIQUE</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n  full_name <span class=\"token keyword\">VARCHAR</span> <span class=\"token punctuation\">(</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">)</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span><span class=\"token punctuation\">,</span>\n  last_login <span class=\"token keyword\">TIMESTAMP</span><span class=\"token punctuation\">,</span>\n  created_on <span class=\"token keyword\">TIMESTAMP</span> <span class=\"token operator\">NOT</span> <span class=\"token boolean\">NULL</span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>So let's break this down</p>\n<ul>\n<li>CREATE TABLE is the command we'll use to create a new table. We're naming it the users table</li>\n<li><code class=\"language-text\">user_id</code> will be an incrementing field The first users will have a user_if of 1, the second one will have user_id of 2, etc. That's what the <code class=\"language-text\">GENERATED ALWAYS AS IDENTITY</code> means. It's autoincrementing. The PRIMARY KEY part means it's what the table will be indexed on which means inherently that it is indexed.</li>\n<li>Previously PostgreSQL used a field type called <code class=\"language-text\">SERIAL</code> to describe the serially incrementing IDs. The <code class=\"language-text\">GENERATED AS ALWAYS</code> syntax is newer, more compliant to the generic SQL spec, and works better. Always use it over <code class=\"language-text\">SERIAL</code>.</li>\n<li>Before, in MongoDB, we relied on the <code class=\"language-text\">_id</code> field to be that key field. PostgreSQL doesn't do that for you by default.</li>\n<li>We created two VARCHARS which is the SQL way of saying string. The username will have a character limit of 25 and the email will have a charcter limit of 50. Each of them will be guaranteed unique (thanks to UNIQUE) and to not be omitted (thanks to NOT NULL).</li>\n<li>They could still be empty strings with NOT NULL but you'd have to intentionally specify that.</li>\n<li>full_name is not unique so you could have two Sally Rogers.</li>\n<li>We our last_login field it will be the last time the user logged in. We could use this later to clean out inactive accounts. Notice this doesn't have NOT NULL so when we create a new user they can have a null login time because they haven't logged in yet.</li>\n<li>Lastly we'll provide it with a date via the created_on field so we can keep track of when a user was created.</li>\n</ul>\n<p>We won't be going into too many more PostgreSQL data types but there are a lot. <a href=\"https://www.postgresql.org/docs/9.5/datatype.html#DATATYPE-TABLE\">See here</a>.</p>\n<h2 id=\"first-record\" style=\"position:relative;\"><a href=\"#first-record\" aria-label=\"first record permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>First record</h2>\n<p>Let's insert a user into our new table. This is like adding a new row into a spreadsheet.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">INSERT</span> <span class=\"token keyword\">INTO</span> users <span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">,</span> email<span class=\"token punctuation\">,</span> full_name<span class=\"token punctuation\">,</span> created_on<span class=\"token punctuation\">)</span> <span class=\"token keyword\">VALUES</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'btholt'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'lol@example.com'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'Brian Holt'</span><span class=\"token punctuation\">,</span> <span class=\"token function\">NOW</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>This is how you insert a new record into a relational database.</li>\n<li>The <code class=\"language-text\">INSERT INTO</code> tells the SQL engine you're going to be doing an insert, and we're doing it into <code class=\"language-text\">users</code>.</li>\n<li>The <code class=\"language-text\">()</code> is where you provide the order you're going to be giving the fields to PostgreSQL in the VALUES part.</li>\n<li>Notice we're not providing user_id since PostgreSQL will provide that itself.</li>\n<li>We're also not providing a <code class=\"language-text\">last_login</code> time because it's not required and in theory the user hasn't logged in yet.</li>\n<li>For the created_on, we're using a special PostgreSQL built in function called <code class=\"language-text\">NOW()</code>. This provide the current time as a parameter in that space.</li>\n</ul>\n<p>You should see <code class=\"language-text\">INSERT 0 1</code> to let you know that the query succeeded. The 1 represents that 1 record was inserted successfully and the 0 represents the OID which we're not covering nor using and will be 0 for us throughout our course i.e. no need to worry about it.</p>\n<h2 id=\"see-your-first-record\" style=\"position:relative;\"><a href=\"#see-your-first-record\" aria-label=\"see your first record permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>See your first record</h2>\n<p>We're about to get into more advance querying but I want you to see the fruits of your labor! Run this query to fetch every record and every field from a table</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\"><span class=\"token keyword\">SELECT</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">FROM</span> users<span class=\"token punctuation\">;</span></code></pre></div>\n<p>You should see your one row you've inserted! Good job! You're off to a great start. We'll go over the query we just ran in the next section.</p>","frontmatter":{"path":"/postgresql","title":"PostgreSQL","order":"3B","section":"SQL","description":"PostgreSQL is a relational database that lets developers write amazing apps. Brian goes over how to get PostgreSQL started on your computer and help you write your first query."}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"order":"2F","path":"/aggregation","title":"Aggregation"}}},{"node":{"frontmatter":{"order":"4D","path":"/complex-neo4j-queries","title":"Complex Neo4j Queries"}}},{"node":{"frontmatter":{"order":"3D","path":"/complex-sql-queries","title":"Complex SQL Queries"}}},{"node":{"frontmatter":{"order":"4A","path":"/graph-databases","title":"Graph Databases"}}},{"node":{"frontmatter":{"order":"6A","path":"/conclusion","title":"Conclusion"}}},{"node":{"frontmatter":{"order":"3H","path":"/hasura","title":"Hasura"}}},{"node":{"frontmatter":{"order":"2E","path":"/indexes-in-mongodb","title":"Indexes in MongoDB"}}},{"node":{"frontmatter":{"order":"1B","path":"/installation-notes","title":"Installation Notes"}}},{"node":{"frontmatter":{"order":"3A","path":"/intro-to-sql-databases","title":"Intro to SQL Database"}}},{"node":{"frontmatter":{"order":"1A","path":"/intro","title":"Introduction"}}},{"node":{"frontmatter":{"order":"3E","path":"/json-in-postgresql","title":"JSON in PostgreSQL"}}},{"node":{"frontmatter":{"order":"5A","path":"/key-value-store","title":"Key-Value Store"}}},{"node":{"frontmatter":{"order":"2H","path":"/mongodb-ops","title":"MongoDB Ops"}}},{"node":{"frontmatter":{"order":"2B","path":"/mongodb","title":"MongoDB"}}},{"node":{"frontmatter":{"order":"5E","path":"/more-redis-concepts","title":"More Redis Concepts"}}},{"node":{"frontmatter":{"order":"4C","path":"/neo4j-browser","title":"Neo4j Browser"}}},{"node":{"frontmatter":{"order":"4E","path":"/neo4j-indexes","title":"Indexes in Neo4j"}}},{"node":{"frontmatter":{"order":"4G","path":"/neo4j-ops","title":"Neo4j Ops"}}},{"node":{"frontmatter":{"order":"2G","path":"/nodejs-app-with-mongodb","title":"Write a Node.js app with MongoDB"}}},{"node":{"frontmatter":{"order":"4F","path":"/nodejs-app-with-neo4j","title":"Node.js App with Neo4j"}}},{"node":{"frontmatter":{"order":"4B","path":"/neo4j","title":"Neo4j"}}},{"node":{"frontmatter":{"order":"3G","path":"/nodejs-app-with-postgresql","title":"Node.js App with PostgreSQL"}}},{"node":{"frontmatter":{"order":"5F","path":"/nodejs-app-with-redis","title":"Node.js App with Redis"}}},{"node":{"frontmatter":{"order":"2A","path":"/nosql","title":"NoSQL"}}},{"node":{"frontmatter":{"order":"3F","path":"/postgresql-indexes","title":"Indexes in PostgreSQL"}}},{"node":{"frontmatter":{"order":"3B","path":"/postgresql","title":"PostgreSQL"}}},{"node":{"frontmatter":{"order":"3I","path":"/postgresql-ops","title":"PostgreSQL Ops"}}},{"node":{"frontmatter":{"order":"2C","path":"/querying-mongodb","title":"Querying MongoDB"}}},{"node":{"frontmatter":{"order":"3C","path":"/querying-postgresql","title":"Querying PostgreSQL"}}},{"node":{"frontmatter":{"order":"5C","path":"/redis-command-options","title":"Redis Command Options"}}},{"node":{"frontmatter":{"order":"5D","path":"/redis-data-types","title":"Redis Data Types"}}},{"node":{"frontmatter":{"order":"5G","path":"/redis-ops","title":"Redis Ops"}}},{"node":{"frontmatter":{"order":"5B","path":"/redis","title":"Redis"}}},{"node":{"frontmatter":{"order":"1C","path":"/terminology","title":"Terminology"}}},{"node":{"frontmatter":{"order":"2D","path":"/updating-mongodb","title":"Updating MongoDB"}}}]}},"pageContext":{}},
    "staticQueryHashes": ["2959687377"]}